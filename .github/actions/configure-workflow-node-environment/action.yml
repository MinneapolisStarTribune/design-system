name: Configure Workflow Node Environment
description: Configures a Node environment with cached modules
runs:
  using: composite # Allows for composable actions
  steps:
    - uses: actions/setup-node@v4
      with:
        node-version-file: .nvmrc
        cache: yarn

    - name: Cache Node modules installation
      uses: actions/cache@v4
      id: node-modules-cache
      with:
        path: node_modules
        key: ${{ runner.os }}-node-${{ hashFiles('yarn.lock') }}

    - name: Install Node modules
      if: steps.node-modules-cache.outputs.cache-hit != 'true'
      shell: bash
      run: yarn install --immutable
